# config.example.yaml
# Contextd Configuration
# Copy to config.yaml and modify as needed.
# Environment variables override file values (prefix: CONTEXTD_)

# Server Configuration
# Controls gRPC and HTTP server settings
server:
  # gRPC server configuration
  grpc:
    host: ""              # Empty = bind to all interfaces (0.0.0.0)
    port: 50051           # gRPC server port
    max_recv_msg_size: 16777216  # 16MB - maximum message size for receiving
    max_send_msg_size: 16777216  # 16MB - maximum message size for sending

    # Keepalive settings for gRPC connections
    keepalive:
      time: 30s           # Send keepalive pings every 30s
      timeout: 10s        # Wait 10s for keepalive response before closing
      min_time: 10s       # Minimum time between client pings

  # HTTP server configuration (for MCP Streamable HTTP transport)
  http:
    host: ""              # Empty = bind to all interfaces
    port: 8080            # HTTP server port
    read_timeout: 30s     # Timeout for reading entire request
    write_timeout: 30s    # Timeout for writing entire response
    idle_timeout: 120s    # Timeout for idle connections

  # Graceful shutdown timeout
  shutdown_timeout: 30s   # Max time to wait for graceful shutdown

# Feature-specific configurations will be added here by their packages:
# - logging (internal/logging) - log levels, formats, output destinations
# - telemetry (internal/telemetry) - OpenTelemetry configuration
# - qdrant (internal/qdrant) - Vector database connection settings
# - scrubber (internal/scrubber) - Secret detection patterns
# - memory (internal/memory) - ReasoningBank settings
# - checkpoint (internal/checkpoint) - Session persistence settings

# Example environment variable overrides:
# export CONTEXTD_SERVER_GRPC_PORT=9000
# export CONTEXTD_SERVER_HTTP_PORT=9080
# export CONTEXTD_SERVER_SHUTDOWN_TIMEOUT=60s
