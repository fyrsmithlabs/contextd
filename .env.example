# contextd Environment Variables
# Copy this file to .env and customize for your environment

# ==============================================================================
# TEI (Text Embeddings Inference) Configuration
# ==============================================================================

# Embedding model to use (default: BAAI/bge-small-en-v1.5)
# Options:
#   - BAAI/bge-small-en-v1.5 (384 dimensions, fast, recommended)
#   - BAAI/bge-base-en-v1.5 (768 dimensions, better quality)
#   - sentence-transformers/all-MiniLM-L6-v2 (384 dimensions)
TEI_MODEL_ID=BAAI/bge-small-en-v1.5

# TEI service port (default: 8080)
# Change if port 8080 is already in use on your system
TEI_PORT=8080

# ==============================================================================
# Qdrant Vector Database Configuration
# ==============================================================================

# Qdrant HTTP API port (default: 6333)
QDRANT_HTTP_PORT=6333

# Qdrant gRPC API port (default: 6334)
QDRANT_GRPC_PORT=6334

# Qdrant host for contextd to connect to (default: localhost)
QDRANT_HOST=localhost

# Qdrant API key (optional, for production deployments)
# QDRANT_API_KEY=your-api-key-here

# ==============================================================================
# Contextd Server Configuration
# ==============================================================================

# HTTP server port (default: 8080)
# WARNING: Conflicts with TEI_PORT if both use 8080
# Either change this to 8081 or change TEI_PORT
CONTEXTD_PORT=8081

# Server host (default: localhost)
# Use 0.0.0.0 to accept connections from other machines
CONTEXTD_HOST=localhost

# Log level (default: info)
# Options: debug, info, warn, error
LOG_LEVEL=info

# Log directory (default: ~/.config/contextd/logs)
# LOG_DIR=~/.config/contextd/logs

# ==============================================================================
# Embedding Provider Configuration
# ==============================================================================

# Embedding provider (default: tei)
# Options:
#   - tei: Local Text Embeddings Inference (recommended)
#   - openai: OpenAI API (requires OPENAI_API_KEY)
EMBEDDING_PROVIDER=tei

# TEI endpoint URL (default: http://localhost:8080)
TEI_ENDPOINT=http://localhost:8080

# Embedding dimension (must match model)
# - BAAI/bge-small-en-v1.5: 384
# - BAAI/bge-base-en-v1.5: 768
# - OpenAI text-embedding-3-small: 1536
EMBEDDING_DIM=384

# ==============================================================================
# OpenAI Configuration (Alternative to TEI)
# ==============================================================================

# OpenAI API key (required if EMBEDDING_PROVIDER=openai)
# OPENAI_API_KEY=sk-your-key-here

# OpenAI model (default: text-embedding-3-small)
# OPENAI_MODEL=text-embedding-3-small

# ==============================================================================
# Pre-Fetch Engine Configuration
# ==============================================================================

# Enable pre-fetch engine (default: true)
PREFETCH_ENABLED=true

# Cache TTL in minutes (default: 5)
PREFETCH_CACHE_TTL=5

# Maximum cache entries (default: 100)
PREFETCH_CACHE_MAX_ENTRIES=100

# ==============================================================================
# Observability Configuration
# ==============================================================================

# Enable OpenTelemetry tracing (default: false)
ENABLE_TELEMETRY=false

# OpenTelemetry endpoint (e.g., Jaeger)
# OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4318

# Enable Prometheus metrics (default: true)
ENABLE_METRICS=true

# Metrics endpoint path (default: /metrics)
METRICS_PATH=/metrics

# ==============================================================================
# Multi-Tenant Configuration
# ==============================================================================

# Owner ID (default: auto-detected from system username)
# Override for testing or shared environments
# OWNER_ID=custom-owner-id

# ==============================================================================
# Development Configuration
# ==============================================================================

# Development mode (default: false)
# Enables debug logging and detailed error messages
DEV_MODE=false

# Skip TLS verification (default: false)
# WARNING: Only use for local development
SKIP_TLS_VERIFY=false
